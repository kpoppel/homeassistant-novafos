import pytest
from . import utils

#@pytest.mark.skip(reason="Skipped")
def test_group_by_day(mocker, novafos):
    novafos._meter_data = utils.load_data_structure("meter_data_small.json")

    expected = [('2024-01-01', 0.168, 0.168, 0.168, 0.168, 0.168),
                ('2024-01-02', 0.67, 0.502, 0.168, 0.67, 0.419),
                ('2024-01-03', 0.289, -0.381, 0.289, 0.67, 0.48),
                ('2024-01-04', 0.232, -0.057, 0.232, 0.289, 0.261),
                ('2024-01-05', 0.117, -0.115, 0.117, 0.232, 0.175),
                ('2024-01-06', 0.155, 0.038, 0.117, 0.155, 0.136),
                ('2024-01-07', 0.17, 0.015, 0.155, 0.17, 0.163)]

    assert novafos.group_by_day(meter_type='water') == expected

# Januar 1-31
# 0.168 - 0.001, 0, 0.003, ...0.002, 0.003,0.002 -> 11=0.106,         sum=0.168, mean=0.007
# 0.67  - 0.003,0.005,0.0 ...0.002, 0.002,0.003  -> 6=0.102, 7=0.179, sum=0.670, mean=0.028
# 0.289 - 0.001,0.0,0.012 ...0.001,0.0,0.002     -> 9=0.112,          sum=0.289, mean=0.012
# 0.232
# 0.117
# 0.155
# 0.17
# 0.245
# 0.381
# 0.279
# 0.333
# 0.272
# 0.209
# 0.241
# 0.223
# 0.266
# 0.334
# 0.323
# 0.172
# 0.364
# 0.35
# 0.414
# 0.276
# 0.271
# 0.164
# 0.456
# 0.174
# 0.225
# 0.381
# 0.254
# 0.196
